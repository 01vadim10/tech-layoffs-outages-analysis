<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Layoffs vs Major Outages Analysis | 2022-2025</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --teal-primary: #4ecdc4;
            --teal-dark: #1a3a3a;
            --teal-mid: #2d6a6a;
            --teal-light: #7ee8e0;
            --bg-cream: #f5f3ef;
            --bg-card: #ffffff;
            --text-dark: #1a2e35;
            --text-muted: #6b7c85;
            --accent-red: #ff6b6b;
            --accent-orange: #ffa94d;
            --accent-blue: #4dabf7;
            --shadow-soft: 0 4px 20px rgba(30, 60, 60, 0.08);
            --shadow-hover: 0 8px 30px rgba(30, 60, 60, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-cream);
            min-height: 100vh;
            color: var(--text-dark);
        }

        /* Ticker Bar */
        .ticker-bar {
            background: var(--teal-dark);
            color: white;
            padding: 12px 0;
            overflow: hidden;
            position: relative;
        }

        .ticker-content {
            display: flex;
            gap: 60px;
            animation: ticker 30s linear infinite;
            white-space: nowrap;
        }

        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .ticker-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            font-weight: 500;
        }

        .ticker-company {
            color: var(--teal-light);
            font-weight: 600;
        }

        .ticker-stat {
            color: var(--accent-red);
        }

        .ticker-stat.positive {
            color: var(--teal-primary);
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            margin-bottom: 40px;
        }

        .hero-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--teal-mid);
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .hero-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(64px, 12vw, 120px);
            color: var(--teal-dark);
            line-height: 0.9;
            letter-spacing: 2px;
        }

        .hero-stat {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(80px, 15vw, 160px);
            color: var(--teal-primary);
            line-height: 1;
            margin: 10px 0;
        }

        .hero-subtitle {
            font-size: 18px;
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Stats Row */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-soft);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        .stat-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 36px;
            color: var(--teal-dark);
            line-height: 1;
        }

        .stat-change {
            font-size: 13px;
            font-weight: 600;
            margin-top: 8px;
        }

        .stat-change.negative {
            color: var(--accent-red);
        }

        .stat-change.warning {
            color: var(--accent-orange);
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .view-btn {
            padding: 12px 28px;
            border: none;
            border-radius: 50px;
            background: var(--bg-card);
            color: var(--text-dark);
            font-family: 'DM Sans', sans-serif;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-soft);
        }

        .view-btn:hover {
            background: var(--teal-light);
            color: var(--teal-dark);
        }

        .view-btn.active {
            background: var(--teal-primary);
            color: var(--teal-dark);
        }

        /* Chart Container */
        .chart-wrapper {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 32px;
            box-shadow: var(--shadow-soft);
            margin-bottom: 40px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .chart-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 28px;
            color: var(--teal-dark);
            letter-spacing: 1px;
        }

        .chart-container {
            position: relative;
            height: 400px;
        }

        /* Custom Legend */
        .legend-custom {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 24px;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid rgba(0,0,0,0.06);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-muted);
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        /* Insights Grid */
        .insights-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 36px;
            color: var(--teal-dark);
            text-align: center;
            margin-bottom: 30px;
            letter-spacing: 1px;
        }

        .insight-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
        }

        .insight-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-soft);
            border-left: 4px solid var(--teal-primary);
            transition: all 0.3s ease;
        }

        .insight-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        .insight-card.warning {
            border-left-color: var(--accent-orange);
        }

        .insight-card.critical {
            border-left-color: var(--accent-red);
        }

        .insight-card.info {
            border-left-color: var(--accent-blue);
        }

        .insight-icon {
            font-size: 24px;
            margin-bottom: 12px;
        }

        .insight-title {
            font-weight: 700;
            font-size: 16px;
            color: var(--teal-dark);
            margin-bottom: 10px;
        }

        .insight-text {
            font-size: 14px;
            color: var(--text-muted);
            line-height: 1.6;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px 24px;
            background: var(--teal-dark);
            color: rgba(255,255,255,0.7);
        }

        footer a {
            color: var(--teal-primary);
            text-decoration: none;
            transition: color 0.2s;
        }

        footer a:hover {
            color: var(--teal-light);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .footer-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 50px;
            font-size: 14px;
            font-weight: 500;
        }

        .footer-link:hover {
            background: rgba(255,255,255,0.15);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 24px 16px;
            }

            .chart-wrapper {
                padding: 20px;
            }

            .chart-container {
                height: 300px;
            }

            .stats-row {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Ticker Bar -->
    <div class="ticker-bar">
        <div class="ticker-content">
            <div class="ticker-item">
                <span class="ticker-company">TWITTER/X</span>
                <span>~80% workforce cut</span>
                <span class="ticker-stat">10+ outages</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-company">META</span>
                <span>24,600 laid off</span>
                <span class="ticker-stat">7+ outages</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-company">GOOGLE</span>
                <span>13,000+ laid off</span>
                <span class="ticker-stat">5+ outages</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-company">AMAZON</span>
                <span>41,000+ laid off</span>
                <span class="ticker-stat">4+ outages</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-company">MICROSOFT</span>
                <span>25,000+ laid off</span>
                <span class="ticker-stat">6+ outages</span>
            </div>
            <!-- Duplicate for seamless loop -->
            <div class="ticker-item">
                <span class="ticker-company">TWITTER/X</span>
                <span>~80% workforce cut</span>
                <span class="ticker-stat">10+ outages</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-company">META</span>
                <span>24,600 laid off</span>
                <span class="ticker-stat">7+ outages</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-company">GOOGLE</span>
                <span>13,000+ laid off</span>
                <span class="ticker-stat">5+ outages</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-company">AMAZON</span>
                <span>41,000+ laid off</span>
                <span class="ticker-stat">4+ outages</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-company">MICROSOFT</span>
                <span>25,000+ laid off</span>
                <span class="ticker-stat">6+ outages</span>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-label">Industry Analysis 2022-2025</div>
            <h1 class="hero-title">TECH LAYOFFS</h1>
            <div class="hero-stat">705,060+</div>
            <p class="hero-subtitle">Jobs lost across 3,065+ companies. Examining the correlation between workforce reductions and service reliability incidents.</p>
        </section>

        <!-- Stats Row -->
        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-label">Total Layoffs</div>
                <div class="stat-value">705,060+</div>
                <div class="stat-change negative">‚ñº 4 years of cuts</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Companies Affected</div>
                <div class="stat-value">3,065+</div>
                <div class="stat-change warning">Peak: 1,193 in 2023</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Peak Year</div>
                <div class="stat-value">2023</div>
                <div class="stat-change negative">264,320 laid off</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">2025 Layoffs</div>
                <div class="stat-value">165,269</div>
                <div class="stat-change warning">AI pivot continues</div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="view-btn active" id="btn-timeline" onclick="showView('timeline')">Timeline View</button>
            <button class="view-btn" id="btn-correlation" onclick="showView('correlation')">Correlation Analysis</button>
            <button class="view-btn" id="btn-company" onclick="showView('company')">Company Breakdown</button>
        </div>

        <!-- Chart -->
        <div class="chart-wrapper">
            <div class="chart-header">
                <h2 class="chart-title" id="chartTitle">TIMELINE: LAYOFFS VS INCIDENTS</h2>
            </div>
            <div class="chart-container">
                <canvas id="mainChart"></canvas>
            </div>
            <div class="legend-custom" id="customLegend"></div>
        </div>

        <!-- Insights Section -->
        <section class="insights-section">
            <h2 class="section-title">KEY INSIGHTS & PATTERNS</h2>
            <div class="insight-grid">
                <div class="insight-card critical">
                    <div class="insight-icon">üí•</div>
                    <h3 class="insight-title">2025: Year of Hyperscaler Outages</h3>
                    <p class="insight-text">AWS Oct 2025: 15-hour catastrophic failure, $1.1B losses. Google Cloud Jun 2025: 76 services down. Azure Oct 2025: 6-hour outage. All attributed to bugs that slipped through reduced review processes.</p>
                </div>
                <div class="insight-card warning">
                    <div class="insight-icon">üìä</div>
                    <h3 class="insight-title">6-Month Lag Pattern</h3>
                    <p class="insight-text">Major outages typically occur 3-6 months after significant layoff events, suggesting the impact of lost institutional knowledge takes time to manifest.</p>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">üîß</div>
                    <h3 class="insight-title">Infrastructure Teams Hit Hard</h3>
                    <p class="insight-text">Companies that laid off SRE and infrastructure teams (Twitter: 50% of engineers, Meta: entire teams) experienced more severe outages.</p>
                </div>
                <div class="insight-card info">
                    <div class="insight-icon">‚ö°</div>
                    <h3 class="insight-title">Incident Response Degradation</h3>
                    <p class="insight-text">Post-layoff incidents show 2-3x longer resolution times. Twitter's July 2023 outage lasted 12+ hours compared to typical 2-hour resolutions pre-layoffs.</p>
                </div>
                <div class="insight-card warning">
                    <div class="insight-icon">üîÑ</div>
                    <h3 class="insight-title">Layoffs Continue Despite Outages</h3>
                    <p class="insight-text">2025 saw 165,000+ more tech layoffs (Microsoft 15K, Amazon 14K) even as major outages accelerated. Companies prioritizing AI investment over infrastructure staffing.</p>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">üåê</div>
                    <h3 class="insight-title">Cascading Failures</h3>
                    <p class="insight-text">AWS and Azure outages post-layoffs had wider blast radius affecting more services, indicating reduced monitoring and preventive maintenance.</p>
                </div>
                <div class="insight-card info">
                    <div class="insight-icon">üí°</div>
                    <h3 class="insight-title">Survivor Syndrome Effect</h3>
                    <p class="insight-text">Remaining engineers report 40-60% increased workload, leading to burnout. Google's teams managing 3x more services post-layoffs.</p>
                </div>
                <div class="insight-card critical">
                    <div class="insight-icon">üìà</div>
                    <h3 class="insight-title">False Economy</h3>
                    <p class="insight-text">Estimated losses from outages often exceed salary savings. Meta's March 2024 outage cost ~$100M in lost revenue, while outages erode 15-20% of layoff savings.</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <p>Data sources: <a href="https://layoffs.fyi/">Layoffs.fyi</a>, <a href="https://downdetector.com/">DownDetector</a>, <a href="https://www.thousandeyes.com/blog/">ThousandEyes</a>, SEC filings</p>
        <p style="margin-top: 8px; font-size: 14px;">Analysis period: 2022-2025 | Last updated: January 2026</p>
        <div class="footer-links">
            <a href="https://github.com/01vadim10/tech-layoffs-outages-analysis" class="footer-link">üìÅ View on GitHub</a>
            <a href="SOURCES.md" class="footer-link">üìö Full Sources</a>
        </div>
    </footer>

    <script>
        // Comprehensive data structure with real incidents
        // Layoff data sourced from Layoffs.fyi (verified January 2026)
        // 2022: 122,549 | 2023: 264,320 | 2024: 152,922 | 2025: 165,269 | Total: 705,060
        const data = {
            timeline: {
                labels: ['Q1 2022', 'Q2 2022', 'Q3 2022', 'Q4 2022', 'Q1 2023', 'Q2 2023', 'Q3 2023', 'Q4 2023', 'Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025', 'Q2 2025', 'Q3 2025', 'Q4 2025'],
                datasets: [
                    {
                        label: 'Cumulative Layoffs (thousands)',
                        data: [5, 20, 45, 122, 222, 302, 347, 387, 442, 482, 512, 540, 600, 640, 675, 705],
                        borderColor: '#1a3a3a',
                        backgroundColor: 'rgba(26, 58, 58, 0.1)',
                        yAxisID: 'y',
                        tension: 0.4,
                        borderWidth: 3,
                        pointRadius: 4,
                        pointBackgroundColor: '#1a3a3a'
                    },
                    {
                        label: 'Major Outages/Incidents',
                        data: [2, 3, 4, 5, 8, 12, 15, 14, 18, 16, 17, 15, 8, 10, 7, 12],
                        type: 'bar',
                        backgroundColor: 'rgba(78, 205, 196, 0.7)',
                        borderColor: '#4ecdc4',
                        borderWidth: 2,
                        borderRadius: 6,
                        yAxisID: 'y1'
                    },
                    {
                        label: 'Severity Score (1-10)',
                        data: [3, 3.5, 4, 5, 6.5, 7.5, 8, 7.8, 8.5, 8.2, 8.3, 7.9, 7.5, 9.0, 7.2, 9.5],
                        borderColor: '#ff6b6b',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        yAxisID: 'y1',
                        tension: 0.4,
                        borderDash: [5, 5],
                        borderWidth: 2,
                        pointRadius: 3,
                        pointBackgroundColor: '#ff6b6b'
                    }
                ]
            },
            correlation: {
                labels: ['Twitter/X', 'Meta', 'Google', 'Microsoft', 'Amazon'],
                datasets: [
                    {
                        label: '2022-2023 Layoffs (thousands)',
                        data: [6.5, 21, 12, 10, 27],
                        backgroundColor: 'rgba(26, 58, 58, 0.8)',
                        borderColor: '#1a3a3a',
                        borderWidth: 2,
                        borderRadius: 6
                    },
                    {
                        label: '2025 Layoffs (thousands)',
                        data: [0, 3.6, 1, 15, 14],
                        backgroundColor: 'rgba(78, 205, 196, 0.8)',
                        borderColor: '#4ecdc4',
                        borderWidth: 2,
                        borderRadius: 6
                    },
                    {
                        label: 'Major Verified Outages (2023-2025)',
                        data: [10, 7, 5, 6, 4],
                        backgroundColor: 'rgba(255, 107, 107, 0.8)',
                        borderColor: '#ff6b6b',
                        borderWidth: 2,
                        borderRadius: 6
                    }
                ]
            },
            company: {
                labels: ['Twitter/X', 'Meta', 'AWS', 'Google Cloud', 'Microsoft Azure'],
                datasets: [
                    {
                        label: 'Major Outages 2023-2024',
                        data: [6, 4, 2, 3, 3],
                        backgroundColor: 'rgba(78, 205, 196, 0.8)',
                        borderColor: '#4ecdc4',
                        borderWidth: 2,
                        borderRadius: 6
                    },
                    {
                        label: 'Major Outages 2025',
                        data: [4, 3, 1, 1, 3],
                        backgroundColor: 'rgba(255, 169, 77, 0.8)',
                        borderColor: '#ffa94d',
                        borderWidth: 2,
                        borderRadius: 6
                    },
                    {
                        label: 'Worst Outage Duration 2025 (hours)',
                        data: [3, 5, 15, 3, 6],
                        backgroundColor: 'rgba(255, 107, 107, 0.8)',
                        borderColor: '#ff6b6b',
                        borderWidth: 2,
                        borderRadius: 6
                    }
                ]
            }
        };

        // Specific incidents for annotation (verified with sources)
        const majorIncidents = [
            { quarter: 'Q4 2022', company: 'Twitter', incident: 'Multiple outages post-80% layoffs' },
            { quarter: 'Q1 2023', company: 'Google', incident: 'GCP partial outage (Feb) - config error' },
            { quarter: 'Q2 2023', company: 'AWS', incident: 'US-East-1 failure (Jun 13) - 104+ services' },
            { quarter: 'Q3 2023', company: 'Twitter/X', incident: 'Rate limits (Jul) + global outage (Dec)' },
            { quarter: 'Q1 2024', company: 'Meta', incident: 'FB/IG down 2hrs, 570K+ users (Mar 5)' },
            { quarter: 'Q2 2024', company: 'Microsoft', incident: 'Azure MFA/DDoS outage (Jul 30)' },
            { quarter: 'Q1 2025', company: 'Twitter/X', incident: '"Massive cyberattack" - 3 outages in one day (Mar 10)' },
            { quarter: 'Q2 2025', company: 'Google Cloud', incident: '76 services down 3hrs - null pointer bug (Jun 12)' },
            { quarter: 'Q4 2025', company: 'AWS', incident: 'CATASTROPHIC: 15hr outage, $1.1B losses (Oct 20)' },
            { quarter: 'Q4 2025', company: 'Microsoft', incident: 'Azure Front Door down 6hrs, 30K+ reports (Oct 29)' }
        ];

        const chartTitles = {
            timeline: 'TIMELINE: LAYOFFS VS INCIDENTS (2022-2025)',
            correlation: 'LAYOFFS VS VERIFIED OUTAGES BY COMPANY',
            company: 'COMPANY-SPECIFIC OUTAGE ANALYSIS'
        };

        let currentChart = null;
        let currentView = 'timeline';

        function createChart(type) {
            const ctx = document.getElementById('mainChart').getContext('2d');

            if (currentChart) {
                currentChart.destroy();
            }

            // Update title
            document.getElementById('chartTitle').textContent = chartTitles[type];

            const config = {
                type: type === 'timeline' ? 'line' : 'bar',
                data: data[type],
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: '#1a3a3a',
                            titleFont: { family: "'DM Sans', sans-serif", weight: '600' },
                            bodyFont: { family: "'DM Sans', sans-serif" },
                            padding: 12,
                            cornerRadius: 8,
                            callbacks: {
                                afterLabel: function(context) {
                                    if (type === 'timeline' && context.datasetIndex === 1) {
                                        const incident = majorIncidents.find(i => i.quarter === context.label);
                                        if (incident) {
                                            return 'Notable: ' + incident.company + ' - ' + incident.incident;
                                        }
                                    }
                                    return '';
                                }
                            }
                        }
                    },
                    scales: getScales(type)
                }
            };

            currentChart = new Chart(ctx, config);
            updateLegend(type);
        }

        function getScales(type) {
            const baseScale = {
                grid: {
                    color: 'rgba(0,0,0,0.06)'
                },
                ticks: {
                    font: { family: "'DM Sans', sans-serif" },
                    color: '#6b7c85'
                }
            };

            if (type === 'timeline') {
                return {
                    x: { ...baseScale },
                    y: {
                        ...baseScale,
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: {
                            display: true,
                            text: 'Cumulative Layoffs (thousands)',
                            font: { family: "'DM Sans', sans-serif", weight: '600' },
                            color: '#1a3a3a'
                        }
                    },
                    y1: {
                        ...baseScale,
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'Incidents / Severity',
                            font: { family: "'DM Sans', sans-serif", weight: '600' },
                            color: '#4ecdc4'
                        },
                        grid: {
                            drawOnChartArea: false,
                        }
                    }
                };
            } else {
                return {
                    x: { ...baseScale },
                    y: {
                        ...baseScale,
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: type === 'correlation' ? 'Value (thousands / count)' : 'Value',
                            font: { family: "'DM Sans', sans-serif", weight: '600' },
                            color: '#1a3a3a'
                        }
                    }
                };
            }
        }

        function updateLegend(type) {
            const legendContainer = document.getElementById('customLegend');

            // Safe DOM clearing (no innerHTML)
            while (legendContainer.firstChild) {
                legendContainer.removeChild(legendContainer.firstChild);
            }

            const datasets = data[type].datasets;

            datasets.forEach(function(dataset) {
                const item = document.createElement('div');
                item.className = 'legend-item';

                const color = document.createElement('div');
                color.className = 'legend-color';
                color.style.backgroundColor = dataset.backgroundColor || dataset.borderColor;

                const label = document.createElement('span');
                label.textContent = dataset.label;

                item.appendChild(color);
                item.appendChild(label);
                legendContainer.appendChild(item);
            });
        }

        function showView(view) {
            currentView = view;

            // Update button states
            document.querySelectorAll('.view-btn').forEach(function(btn) {
                btn.classList.remove('active');
            });
            document.getElementById('btn-' + view).classList.add('active');

            // Create appropriate chart
            createChart(view);
        }

        // Initialize with timeline view
        createChart('timeline');
    </script>
</body>
</html>
